<div class="headers">MIS And KPI Monitoring Screen
    <div class="step-tabs">
        <button class="step-tab active" [class.active]="activeTab === 'pl'" (click)="setActive('pl')">
            P&L
        </button>

        <span class="step-line"></span>

        <button class="step-tab" routerLink="/plNotes" routerLinkActive="active"
            [class.active]="activeTab === 'plNotes'" (click)="setActive('plNotes')">
            P&L Notes
        </button>

        <span class="step-line"></span>

        <button class="step-tab" routerLink="/additionalNotes" routerLinkActive="active"
            [class.active]="activeTab === 'additionalNotes'" (click)="setActive('additionalNotes')">
            Additional Notes & Ratios
        </button>

        <span class="step-line"></span>

        <button class="step-tab" routerLink="/plHrData" routerLinkActive="active"
            [class.active]="activeTab === 'plHrData'" (click)="setActive('plHrData')">
            P&L Notes-1(hr Data)
        </button>

        <!-- <span class="step-line"></span>

        <button class="step-tab" routerLink="/stock" routerLinkActive="active" [class.active]="activeTab === 'stock'"
            (click)="setActive('stock')">
            Stock
        </button> -->
    </div>

</div>
@if(activeTab == 'pl'){
<div class="modern-table-wrapper table-scroll">

    <table mat-table [dataSource]="dataSource" class="modern-table" sticky>

        <!-- PARTICULAR -->
        <ng-container matColumnDef="particular">
            <th mat-header-cell *matHeaderCellDef rowspan="2" class="particular-col">
                PARTICULARS
            </th>

            <td mat-cell *matCellDef="let row" class="particular-col" [class.section]="row.section"
                [class.total]="row.total">
                {{ row.particular }}
            </td>
        </ng-container>

        <!-- MAR GROUP -->
        <ng-container matColumnDef="marGroup">
            <th mat-header-cell *matHeaderCellDef colspan="2" class="group-header">
                MAR-24
            </th>
        </ng-container>

        <ng-container matColumnDef="marAmount">
            <th mat-header-cell *matHeaderCellDef class="sub-header">Amount (In Rs.)</th>
            <td mat-cell *matCellDef="let row">{{ row.marAmount }}</td>
        </ng-container>

        <ng-container matColumnDef="marRatio">
            <th mat-header-cell *matHeaderCellDef class="sub-header">Ratio (%)</th>
            <td mat-cell *matCellDef="let row">{{ row.marRatio }}</td>
        </ng-container>

        <!-- APR GROUP -->
        <ng-container matColumnDef="aprGroup">
            <th mat-header-cell *matHeaderCellDef colspan="2" class="group-header">
                APR-24
            </th>
        </ng-container>

        <ng-container matColumnDef="aprAmount">
            <th mat-header-cell *matHeaderCellDef class="sub-header">Amount (In Rs.)</th>
            <td mat-cell *matCellDef="let row">{{ row.aprAmount }}</td>
        </ng-container>

        <ng-container matColumnDef="aprRatio">
            <th mat-header-cell *matHeaderCellDef class="sub-header">Ratio (%)</th>
            <td mat-cell *matCellDef="let row">{{ row.aprRatio }}</td>
        </ng-container>

        <!-- MAY GROUP -->
        <ng-container matColumnDef="mayGroup">
            <th mat-header-cell *matHeaderCellDef colspan="2" class="group-header">
                MAY-24
            </th>
        </ng-container>

        <ng-container matColumnDef="mayAmount">
            <th mat-header-cell *matHeaderCellDef class="sub-header">Amount (In Rs.)</th>
            <td mat-cell *matCellDef="let row">{{ row.mayAmount }}</td>
        </ng-container>

        <ng-container matColumnDef="mayRatio">
            <th mat-header-cell *matHeaderCellDef class="sub-header">Ratio (%)</th>
            <td mat-cell *matCellDef="let row">{{ row.mayRatio }}</td>
        </ng-container>

        <!-- HEADER ROWS -->
        <tr mat-header-row *matHeaderRowDef="groupHeaderColumns; sticky: true"></tr>
        <tr mat-header-row *matHeaderRowDef="subHeaderColumns; sticky: true"></tr>

        <!-- DATA ROW -->
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>

    </table>

</div>
}
@if(activeTab =='plNotes'){
<div class="modern-table-wrapper table-scroll">
    <table mat-table [dataSource]="dataSourcePlNotes" class="mat-elevation-z1">

        <!-- PARTICULAR -->
        <ng-container matColumnDef="particulars">
            <th mat-header-cell *matHeaderCellDef rowspan="2" class="particular-col">
                PARTICULARS
            </th>

            <td mat-cell *matCellDef="let row" class="particular-col" [class.section]="row.type === 'section'"
                [class.total]="row.type === 'total'">
                {{ row.particulars }}
            </td>
        </ng-container>

        <!-- MAR GROUP -->
        <ng-container matColumnDef="marGroup">
            <th mat-header-cell *matHeaderCellDef colspan="1" class="group-header">
                MAR-24
            </th>
        </ng-container>

        <!-- MAR -->
        <ng-container matColumnDef="marAmount">
            <th mat-header-cell *matHeaderCellDef class="sub-header">Amount (In Rs.)</th>
            <td mat-cell *matCellDef="let row" [class.section]="row.type === 'section'"
                [class.total]="row.type === 'total'">
                {{ row.type === 'item' || row.type === 'total' ? row.marAmount : '' }}
            </td>
        </ng-container>

        <!-- APR GROUP -->
        <ng-container matColumnDef="aprGroup">
            <th mat-header-cell *matHeaderCellDef colspan="1" class="group-header">
                APR-24
            </th>
        </ng-container>

        <!-- APR -->
        <ng-container matColumnDef="aprAmount">
            <th mat-header-cell *matHeaderCellDef class="sub-header">Amount (In Rs.)</th>
            <td mat-cell *matCellDef="let row">{{ row.type === 'item' || row.type === 'total' ? row.aprAmount : '' }}
            </td>
        </ng-container>
        <!-- MAY GROUP -->
        <ng-container matColumnDef="mayGroup">
            <th mat-header-cell *matHeaderCellDef colspan="1" class="group-header">
                MAY-24
            </th>
        </ng-container>
        <ng-container matColumnDef="mayAmount">
            <th mat-header-cell *matHeaderCellDef class="sub-header">Amount (In Rs.)</th>
            <td mat-cell *matCellDef="let row">{{ row.type === 'item' || row.type === 'total' ? row.mayAmount : '' }}
            </td>
        </ng-container>

        <!-- HEADER ROWS -->
        <tr mat-header-row *matHeaderRowDef="groupHeaderColumnsPlNotes; sticky: true"></tr>
        <tr mat-header-row *matHeaderRowDef="subHeaderColumnsPlNotes; sticky:true"></tr>

        <!-- DATA ROWS -->
        <tr mat-row *matRowDef="let row; columns: displayedPlNotesColumns" [ngClass]="row.type"></tr>

    </table>
</div>
}

@if(activeTab == 'additionalNotes'){
<div class="two-by-two-grid">

    <!-- Sundry Debtors -->
    <div class="modern-table-wrapper table-scroll">
        <div class="table-additional-headers">SUNDRY DEBTORS</div>

        <table mat-table [dataSource]="sundryDebtorsData" class="modern-table" sticky>

            <!-- Months -->
            <ng-container matColumnDef="months">
                <th mat-header-cell *matHeaderCellDef>Months</th>
                <td mat-cell *matCellDef="let row" [class.total]="row.total">
                    {{ row.months }}
                </td>
            </ng-container>

            <!-- Dec-25 -->
            <ng-container matColumnDef="dec25">
                <th mat-header-cell *matHeaderCellDef>Dec-25</th>
                <td mat-cell *matCellDef="let row" [class.total]="row.total">
                    {{ row.dec25 }}
                </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedAdditionalColumns; sticky:true"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedAdditionalColumns"></tr>

        </table>
    </div>

    <!-- Sundry Creditors -->
    <div class="modern-table-wrapper table-scroll">
        <div class="table-additional-headers">SUNDRY CREDITORS</div>

        <table mat-table [dataSource]="sundryCreditorsData" class="modern-table">

            <!-- Months -->
            <ng-container matColumnDef="months">
                <th mat-header-cell *matHeaderCellDef>Months</th>
                <td mat-cell *matCellDef="let row" [class.total]="row.total">
                    {{ row.months }}
                </td>
            </ng-container>

            <!-- Dec-25 -->
            <ng-container matColumnDef="dec25">
                <th mat-header-cell *matHeaderCellDef>Dec-25</th>
                <td mat-cell *matCellDef="let row" [class.total]="row.total">
                    {{ row.dec25 }}
                </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedAdditionalColumns; sticky:true"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedAdditionalColumns"></tr>

        </table>
    </div>

    <!-- Net Current Assets -->
    <div class="modern-table-wrapper table-scroll">
        <div class="table-additional-headers">Net Current Assets (fig in Cr)</div>

        <table mat-table [dataSource]="netCurrentAssetsData" class="modern-table" sticky>

            <!-- Particulars -->
            <ng-container matColumnDef="particulars">
                <th mat-header-cell *matHeaderCellDef>Particulars</th>
                <td mat-cell *matCellDef="let row" [class.total]="row.total">
                    {{ row.particulars }}
                </td>
            </ng-container>

            <!-- Mar-25 -->
            <ng-container matColumnDef="mar25">
                <th mat-header-cell *matHeaderCellDef>Dec-25</th>
                <td mat-cell *matCellDef="let row" [class.total]="row.total">
                    {{ row.mar25 }}
                </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedNcaColumns ;sticky:true" class="particular-col-3rd-table">
            </tr>
            <tr mat-row *matRowDef="let row; columns: displayedNcaColumns"></tr>

        </table>
    </div>

    <!-- Duty Drawback -->
    <div class="modern-table-wrapper table-scroll">
        <div class="table-additional-headers">DUTY DRAWBACK</div>

        <table mat-table [dataSource]="dutyDrawbackData" class="modern-table" sticky>

            <!-- Particular -->
            <ng-container matColumnDef="particulars">
                <th mat-header-cell *matHeaderCellDef>Particulars</th>
                <td mat-cell *matCellDef="let row" [class.total]="row.total">
                    {{ row.particulars }}
                </td>
            </ng-container>

            <!-- Mar-25 -->
            <ng-container matColumnDef="mar25">
                <th mat-header-cell *matHeaderCellDef>Dec-25</th>
                <td mat-cell *matCellDef="let row" [class.total]="row.total">
                    {{ row.mar25 }}
                </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedDutyColumns; sticky:true"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedDutyColumns"></tr>

        </table>
    </div>

</div>
}

@if(activeTab=='plHrData'){
<div class="modern-table-wrapper table-scroll">
    <table mat-table [dataSource]="salaryData" class="mat-elevation-z8" sticky>

        <!-- Particulars Column -->
        <ng-container matColumnDef="particulars">
            <th mat-header-cell *matHeaderCellDef class="particular-col"> Particulars </th>
            <td mat-cell *matCellDef="let row" [class.total]="row.total"> {{ row.particulars }} </td>
        </ng-container>

        <!-- Company Column -->
        <ng-container matColumnDef="company">
            <th mat-header-cell *matHeaderCellDef> Company </th>
            <td mat-cell *matCellDef="let row" [class.total]="row.total"> {{ row.company }} </td>
        </ng-container>

        <!-- Dec-25 Column -->
        <ng-container matColumnDef="dec25">
            <th mat-header-cell *matHeaderCellDef> Dec-25 </th>
            <td mat-cell *matCellDef="let row" [class.total]="row.total">
                {{ row.dec25 | number }}
            </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumnsPlHr; sticky:true"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumnsPlHr"></tr>

    </table>
</div>
}